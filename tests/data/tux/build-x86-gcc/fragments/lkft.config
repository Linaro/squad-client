# Make sure to enable NUMA
CONFIG_NUMA=y

# Enable KSM
# https://bugs.linaro.org/show_bug.cgi?id=3857#c3
CONFIG_KSM=y

# Autogroup
# https://bugs.linaro.org/show_bug.cgi?id=3377#c0
CONFIG_SCHED_AUTOGROUP=y

# https://bugs.linaro.org/show_bug.cgi?id=4255
CONFIG_MEMCG=y

# https://bugs.linaro.org/show_bug.cgi?id=4262
CONFIG_TASKSTATS=y
CONFIG_TASK_IO_ACCOUNTING=y
CONFIG_TASK_XACCT=y

# Vivid driver for V4L2 tests
CONFIG_MEDIA_TEST_SUPPORT=y
CONFIG_V4L_TEST_DRIVERS=y
CONFIG_VIDEO_VIVID=m
CONFIG_MEDIA_SUPPORT=y
CONFIG_MEDIA_CAMERA_SUPPORT=y
CONFIG_VIDEO_V4L2=y
CONFIG_VIDEO_DEV=y
CONFIG_VIDEOBUF2_CORE=m
CONFIG_VIDEOBUF2_V4L2=m
CONFIG_VIDEOBUF2_MEMOPS=m
CONFIG_VIDEOBUF2_DMA_CONTIG=m
CONFIG_VIDEOBUF2_VMALLOC=m
CONFIG_VIDEO_V4L2_TPG=m

# Enable ASIX USB NET drivers
CONFIG_USB_USBNET=y
CONFIG_USB_NET_AX8817X=y
CONFIG_USB_NET_AX88179_178A=y

# Networking for db845c
CONFIG_PHY_QCOM_QMP=y
CONFIG_PHY_QCOM_UFS=y
CONFIG_PHY_QCOM_USB_SS=y

# db845c device with UFS storage
CONFIG_SCSI_UFS_QCOM=y

# USB support
CONFIG_USB_ULPI_BUS=y
CONFIG_GENERIC_PHY=y
CONFIG_EXTCON=y
CONFIG_PHY_QCOM_QUSB2=y
CONFIG_PHY_QCOM_USB_HS=y
CONFIG_PHY_QCOM_USB_HSIC=y
CONFIG_USB_CHIPIDEA_ULPI=y
CONFIG_USB_DWC3_ULPI=y

# Enable for kvm-unit-tests
CONFIG_HAVE_KVM_IRQCHIP=y
CONFIG_HAVE_KVM_IRQFD=y
CONFIG_HAVE_KVM_IRQ_ROUTING=y
CONFIG_HAVE_KVM_EVENTFD=y
CONFIG_KVM_MMIO=y
CONFIG_KVM_ASYNC_PF=y
CONFIG_HAVE_KVM_MSI=y
CONFIG_HAVE_KVM_CPU_RELAX_INTERCEPT=y
CONFIG_KVM_VFIO=y
CONFIG_KVM_GENERIC_DIRTYLOG_READ_PROTECT=y
CONFIG_KVM_COMPAT=y
CONFIG_HAVE_KVM_IRQ_BYPASS=y
CONFIG_KVM=y
CONFIG_KVM_INTEL=y
CONFIG_KVM_AMD=y
CONFIG_KVM_MMU_AUDIT=y
CONFIG_USER_RETURN_NOTIFIER=y
CONFIG_PREEMPT_NOTIFIERS=y
CONFIG_IRQ_BYPASS_MANAGER=y

# Enable BFQ I/O scheduler
CONFIG_IOSCHED_BFQ=m
CONFIG_BFQ_GROUP_IOSCHED=y
CONFIG_BLK_CGROUP=y

# Enable for arm32/x86 LTP systcalls/fanotify
# https://bugs.linaro.org/show_bug.cgi?id=5633
CONFIG_FANOTIFY=y

# Enable controllers and cgroup tests from LTP
# https://projects.linaro.org/browse/LKQ-279
CONFIG_CGROUP_FREEZER=y
CONFIG_CGROUP_NET_PRIO=y
CONFIG_NET_CLS_CGROUP=y
CONFIG_SCHED_DEBUG=y
CONFIG_UCLAMP_TASK=y
CONFIG_UCLAMP_TASK_GROUP=y

# Enable network chipset for ThunderX2
CONFIG_NET_VENDOR_QLOGIC=y
CONFIG_QED=y
CONFIG_QED_SRIOV=y
CONFIG_QEDE=y

# Enable for selftest kvm tests
# https://bugs.linaro.org/show_bug.cgi?id=3780
CONFIG_TRANSPARENT_HUGEPAGE=y
CONFIG_TRANSPARENT_HUGEPAGE_MADVISE=y

# For igt Chamelium test
CONFIG_DRM_LOAD_EDID_FIRMWARE=y
CONFIG_DRM_I2C_ADV7511_AUDIO=y
CONFIG_DRM_MSM=m
CONFIG_DRM_MSM_HDMI_HDCP=y
CONFIG_DRM_MSM_DSI=y
CONFIG_DRM_MSM_DSI_PLL=y
CONFIG_DRM_MSM_DSI_28NM_PHY=y
CONFIG_DRM_MSM_DSI_20NM_PHY=y
CONFIG_DRM_MSM_DSI_28NM_8960_PHY=y
CONFIG_DRM_MSM_DSI_14NM_PHY=y
CONFIG_QCOM_IOMMU=y
CONFIG_SND_SOC_QCOM=m
CONFIG_SND_SOC_LPASS_CPU=m
CONFIG_SND_SOC_LPASS_PLATFORM=m
CONFIG_SND_SOC_LPASS_APQ8016=m
CONFIG_SND_SOC_APQ8016_SBC=m
CONFIG_SND_SOC_QDSP6_COMMON=m
CONFIG_SND_SOC_QDSP6_AFE=m
CONFIG_SND_SOC_QDSP6_AFE_DAI=m
CONFIG_SND_SOC_QDSP6_ADM=m
CONFIG_SND_SOC_QDSP6_ROUTING=m
CONFIG_SND_SOC_QDSP6_ASM=m
CONFIG_SND_SOC_QDSP6_ASM_DAI=m
CONFIG_SND_SOC_QDSP6_CORE=m
CONFIG_SND_SOC_QDSP6=m
CONFIG_SND_SOC_MSM8996=m
CONFIG_SND_SOC_MSM8916_WCD_ANALOG=m
CONFIG_SND_SOC_MSM8916_WCD_DIGITAL=m

# LTP tracing
# https://projects.linaro.org/browse/LKQ-252
CONFIG_KPROBES=y
CONFIG_FTRACE=y
CONFIG_FUNCTION_PROFILER=y
CONFIG_TRACER_SNAPSHOT=y
CONFIG_STACK_TRACER=y
CONFIG_HIST_TRIGGERS=y
CONFIG_SCHED_TRACER=y
CONFIG_PREEMPT_TRACER=y
CONFIG_IRQSOFF_TRACER=y
CONFIG_PREEMPTIRQ_DELAY_TEST=m
CONFIG_MODULES=y
CONFIG_MODULE_UNLOAD=y
# Disable these configs till stable rc 4.4 i386 build problem fixed
# CONFIG_SAMPLES=y
# CONFIG_SAMPLE_FTRACE_DIRECT=m
# CONFIG_SAMPLE_TRACE_PRINTK=m
CONFIG_KALLSYMS_ALL=y
# LTP tracing dynamic_debug01 needs this config fragment
CONFIG_DYNAMIC_DEBUG=y

# Multipath TCP
# https://lore.kernel.org/netdev/20190617225808.665-1-mathew.j.martineau@linux.intel.com/
CONFIG_MPTCP=y

# Enable debug option
# https://projects.linaro.org/browse/LKQ-186
CONFIG_KFENCE=y

# Introduce CoreSight support to LKFT
# https://projects.linaro.org/browse/LKQ-268
# Coresight driver flags
CONFIG_CORESIGHT=y
CONFIG_CORESIGHT_LINKS_AND_SINKS=y
CONFIG_CORESIGHT_LINK_AND_SINK_TMC=y
CONFIG_CORESIGHT_CATU=y
CONFIG_CORESIGHT_SOURCE_ETM4X=y
CONFIG_CORESIGHT_SINK_TPIU=y

# Perf support
CONFIG_PERF_EVENTS=y

# SCMI support
CONFIG_ARM_SCMI_PROTOCOL=y
CONFIG_SENSORS_ARM_SCMI=y
CONFIG_COMMON_CLK_SCMI=y
CONFIG_ARM_SCMI_CPUFREQ=y

# Needed fragments for mmtests
# sysbenchcpu
CONFIG_SCHEDSTATS=y
